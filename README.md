# Computer from scratch 

## Control unit

Операции
1. Сложение
2. Вычитание
3. Сдвиг влево
4. Сдвиг вправо
5. Записать значения в регистр A
6. Записать значения в регистр B
7. Условный переход при A > B
8. Условный переход при A < B
9. Условный переход при A = B
10. Завершить программу

> ### Условные обозначения
> 
> **RW**: read - "0", write - "1"
> 
> **EN**: enable - "1", disable - "0"
> 
> **HS**: hide - "1", show- "0"


> ### Устройства:
> - СК - Счетчик команд
> - РКК - Регистр кода команды
> - РА - Регистр А
> - РВ - Регистр В
> - РПА - Регистр пользовательского адреса
> - РР - Регистр результата
> - АЛУ - Арифметико-логичекое устройство
> - РФ - Регистр флагов

<h2>Формат команды</h2>
<div style="padding: 20px 10px 10px 20px; border-left: 2px solid grey; margin-bottom: 20px">

<span style="border: 3px solid orange">**код операции**</span>
<span style="border: 3px solid pink">адрес</span>

</div>

### 1. Операция сложения 

Код операции - **0001**

Адрес - номер места в ОЗУ, куда необходимо записать результат

Действия для выполнения:

1. Выключаем счетчик команд
2. Включаем чтение из ОЗУ **[R]** `0`
3. Включаем выводы ОЗУ **[EN]** `1` на чтение
4. Включаем запись в регистр пользовательских адресов (РПА) **[R]** `1`
5. Включаем выводы РПА **[EN]** для записи `1`
6. Выключаем выводы РПА **[EN]**  для записи `0`
7. Включаем запись в регистр кода команды (РКК) **[W]** `1`
8. Включаем выводы РКК **[EN]** для записи `1`
9. Выключаем выводы РКК **[EN]**  для записи `0`
10. Включаем чтение из РКК **[R]** `1`
11. Включаем выводы РКК **[EN]** для чтения `0`
12. Включаем выводы **Mode** `1`
13. Выключаем выводы ОЗУ **[EN]** `0` на чтение
14. Включаем выводы АЛУ **[EN]** для чтения
15. Включаем на запись регистр результата (РР) **[W]** `1`
16. Включаем выводы РР **[EN]** `1` для записи
17. Выключаем выводы РР **[EN]** `0` для записи
18. Выключаем выводы AЛУ **[EN]** `0` для чтения
19. Включаем чтение РР **[R]** `0`
20. Включаем выводы РР **[EN]** `1` для чтения
21. Выключаем вывод адреса из счетчика команд **[HS]** `1`
22. Включаем чтение РПА **[R]** `0`
23. Включаем выводы РПА **[EN]** `1` для чтения
24. Включаем ОЗУ на запись **[W]** `1`
25. Включаем выводы ОЗУ  **[EN]** `1` для записи
26. Выключаем выводы ОЗУ  **[EN]** `0` для записи
27. Выключаем выводы РПА **[EN]** `0` для чтения
28. Включаем вывод адреса из счетчика команд **[HS]** `0`
29. Выключаем выводы РР **[EN]** `0` для чтения
30. Включаем счетчик команд

Выводы :
1. EN СК
2. HS CK
3. EN ОЗУ
4. RW ОЗУ
5. EN РКК
6. RW РКК
7. EN PA
8. RW PA
9. EN PB
10. RW PB
11. EN PP
12. RW PP
13. EN РПА
14. RW РПА
15. АЛУ 1-бит (для выбора варианта работы АЛУ)
16. АЛУ 2-бит (для выбора варианта работы АЛУ)
17. EN АЛУ (чтение с выхода)
18. EN РФ
19. RW РФ

| Такт | Состояния на выходе   | Действия                   |
|------|-----------------------|----------------------------|
| 1    | 0010110000001100000   | 1,2,3,4,5,6,7,8            |
| 2    | 0000101010110000100   | 9,10,11,12,13,14,15,16     |
| 3    | 0111000000101000000   | 16,17,18,19,20,21,22,23,24 |
| 4    | 1000000000000000000   | 24,25,26,27,28,28,30       |
